<style>
body {
  font-family: 'Source Code Pro', 'ヒラギノ';
}
</style>

# 目次

1. 活動の概要
2. 関数型プログラミング言語
3. Standard ML  
  3.1 Standard ML の特徴  
  3.2 開発環境構築  
  3.3 式の評価, 束縛, 関数, コメント, ファイルの使用, コンパイル  
  3.4 主なデータ型とリテラル  
  3.5 関数定義, パターンマッチング, if, 相互再帰/高階関数, 関数式, 部分適用, 中置演算子  
  3.6 リスト操作関数, リストの畳み込み  
  3.7 datatype 宣言, 型シノニム, 抽象データ型, 標準のデータ型  
  3.8 参照型, 評価順序, 例外処理  
  3.9 モジュール, ストラクチャ, シグネチャ, シグネチャ制約の透明性, ファンクタ
4. コンパイラの構成  
  3.1 字句解析器  
  3.2 構文解析器
5. 後期の活動について
6. 参考文献

# 1. 活動の概要

&emsp;この班では, 関数型プログラミング言語 **Standard ML** を用いて, コンパイラを開発することを目標として活動した. 活動期間は通年であるが, 前期の活動としては, まず Standard ML の構文や言語機能についての勉強会を開くという形式をとった. 前期活動の終盤では, コンパイラ全体の構成についての勉強会を行い, 字句解析器や構文解析器について学んだ.

&emsp;以下, 勉強会を通じて得られた知見をまとめる.

# 2. 関数型プログラミング言語

&emsp;関数型プログラミング言語とは, 関数によってプログラムを構成するプログラミングスタイルを基本とする言語である. Standard ML の他に, LISP や Haskell, OCaml などが代表的な関数型プログラミング言語として知られている.

# 3. Standard ML

## 3.1 Standard ML の特徴

&emsp;Standard ML は, プログラミング言語 ML の標準仕様, あるいは一方言として位置付けられる関数型プログラミング言語である. 以下のような特徴を持っている.

- 強力な型システム
- パターンパッチング機構
- 高度なモジュールシステム
- 命令型言語的な機能

&emsp;関数がプログラムの主役となる関数型言語では, 関数は第一級オブジェクト(first-class object)である. ここで, 第一級オブジェクトとは, 変数に格納したり, 関数の引数や戻り値に使用できるデータのことをいう.

## 3.2 開発環境の構築方法

&emsp;Standard ML の処理系としては, コンパイラ **mlton** と, 対話的実行環境 **Standard ML of New Jersey** (以下, **smlnj**) が存在する. そのため, ソースファイルを用いてプログラムを作成することも, ソースファイルを作成せずに式の評価や型システムの動作を対話的にテストすることもできる.

&emsp;mlton と smlnj は、どちらも apt, pacman, brew といったパッケージ管理システム経由で導入が可能である. このプロジェクト活動においては, macOS 環境では brew 経由で, Ubuntu 環境では apt 経由で, Arch linux 環境では pacman 経由で導入した.

## 3.3 式の評価, 束縛, 関数, コメント, ファイル, コンパイル

&emsp;smlnj は sml コマンドで起動する. 式を入力して改行すれば評価される. 複数行に渡る構文で記述している場合, 改行して入力を続けることができる.

```
- 2 * 3 + 4 * 5;
val it = 26 : int
- it - 20;
val it = 6 : int
```

&emsp;セミコロンは式の終端を表す. smlnj は式を1度評価するごとに, その結果を名前 it に束縛する. it を用いると, 前回の式の評価結果を用いた新たな式の評価が可能である.

&emsp;関数型言語では, 代入は行わずに, 異なる概念である**束縛**を行う. 束縛は, 式と名前を対応付ける操作を指す. 例えば先ほど示したサンプルでは, 最初は名前 it を 26 で束縛し, 次は 6 で束縛している.

&emsp;文字列リテラルは, 2つのダブルクォートで文字列を挟み込んで表現する.

## 3.4 主なデータ型

### 基本データ型

| 型名 | 説明 | リテラルの例 |
| --- | --- | --- |
| bool | 論理型 | true, false |
| int | 整数型(符号付き整数型) | 123, 0x1a, ~123 (負数) |
| word | ワード型 (符号なし整数型) | 0w123, 0wx1a |
| real | 実数型 | 3.14, ~3.14, 1.23e4, 1.23e~4 |
| char | 文字型 | #"a", #"\n" |
| string | 文字列型 | "abc\n" |
| unit | ユニット型 (0-タプル) | () |

### 複合型

| 型 (例) | 説明 | リテラルの例 |
| --- | --- | --- |
| int * int * string | タプルの例 | (123, 456, "abc") |
| { a: int, b: int, <br>c: string } | レコード型 | { a = 123, b = 456, <br>c = "abc" } |
| int list | リスト型 (値の列) | [3, 1, 4, 2, 5] |

### 論理型

論理値の値は true または false である. 論理型データの演算に用いる演算子として, not (否定), andalso (論理積), orelse (論理和) が挙げられる.

### 数値型

数値型の演算には ~ (単項マイナス), + (加算), - (減算), * (乗算), abs (絶対値) などを用いることができる. 除算演算子には / (real 型用) と div (int, word 型用) の 2 種類がある. 剰余演算子は mod で, int 型と word 型で利用できる.

### 文字型/文字列型

### タプル型/ユニット型

### レコード型

### リスト型

### 多相型

### 等値型

## 3.5 関数定義, パターンマッチング, if, 相互再帰/高階関数, 関数式, 部分適用, 中置演算子

&emsp;

## 3.6 リスト操作関数, リストの畳み込み

&emsp;

## 3.7 ``datatype`` 宣言, 型シノニム, 抽象データ型, 標準のデータ型

&emsp;

## 3.8 参照型, 評価順序, 例外処理

&emsp;

# 4. コンパイラの構成

&emsp;

## 4.1 字句解析器

&emsp;

## 4.2 構文解析器

&emsp;

# 5. 後期の活動について

&emsp;

# 6. 参考文献

- Andrew W. Appel 著, 神林 靖 監修/編集, 滝本 宗宏 編集 『最新コンパイラ構成技法』
- 『ウォークスルー Standard ML』 http://walk.northcol.org/sml/
- 『お気楽 Standard ML of New Jersey 入門』 http://www.geocities.jp/m_hiroi/func/index.html#sml
